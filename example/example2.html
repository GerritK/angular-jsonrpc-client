<html>
<head>
    <title>angular-jsonrpc-client example 2</title>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.16/angular.js"></script>
    <script src="../src/angular-jsonrpc-client.js"></script>
    <script>
        angular
            .module('TestApp', ['angular-jsonrpc-client'])
            .config(function(jsonrpcConfigProvider) {
                console.info(jsonrpcConfigProvider);
                jsonrpcConfigProvider.set({
                    url: 'http://localhost:8000/rpc',
                    returnHttpPromise: true
                });
            })
            .controller('TestController', ['$scope', 'jsonrpc', function($scope, jsonrpc) {
                $scope.result = '';

                jsonrpc.request('version', {})
                    .then(function(response) {
                        $scope.httpStatusCode = error.status;
                        if (response.result) {
                            $scope.callSuccessful = true;
                            $scope.result = response.result;
                        }
                        else {
                            $scope.callSuccessful = false;
                            $scope.error = response.error;
                        }
                    })
                    .catch(function(error) {
                        $scope.callSuccessful = false;
                        $scope.httpStatusCode = error.status;
                        $scope.error = error;
                    });
            }]);
    </script>
</head>
<body ng-app="TestApp">
    <div ng-controller="TestController">
        <p>HTTP status code: {{ httpStatusCode }}</p>
        <p>JSON-RPC call was {{ callSuccessful ? '' : 'not' }} successful.</p>
        <p>JSON-RPC result:</p>
        <pre>{{ result }}</pre>
        <p>JSON-RPC or HTTP error:</p>
        <pre>{{ error }}</pre>
    </div>
</body>
</html>